import{w as j,d as T,_ as k}from"./preload-helper-222d7d75.js";import{T as p}from"./index-b0755815.js";var se=Object.defineProperty,ne=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,K=(r,e,a)=>e in r?se(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,c=(r,e)=>{for(var a in e||(e={}))G.call(e,a)&&K(r,a,e[a]);if(D)for(var a of D(e))J.call(e,a)&&K(r,a,e[a]);return r},h=(r,e)=>ne(r,ce(e)),V=(r,e)=>{var a={};for(var t in r)G.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&D)for(var t of D(r))e.indexOf(t)<0&&J.call(r,t)&&(a[t]=r[t]);return a},x=["error","warn","debug"],Q=({logger:r=console,level:e=x[1],prefix:a="[i18n]: "})=>x.reduce((t,l,i)=>h(c({},t),{[l]:o=>x.indexOf(e)>=i&&r[l](`${a}${o}`)}),{}),d=Q({}),ue=r=>{d=r},M=r=>{var e=r,{parser:a,key:t,params:l,translations:i,locale:o,fallbackLocale:s}=e,u=V(e,["parser","key","params","translations","locale","fallbackLocale"]);if(!(t&&o))return d.warn("No translation key or locale provided. Skipping translation..."),"";let n=(i[o]||{})[t];return s&&n===void 0&&(n=(i[s]||{})[t]),u.hasOwnProperty("fallbackValue")&&n===void 0?u.fallbackValue:a.parse(n,l,o,t)},b=(...r)=>r.length?r.filter(e=>!!e).map(e=>{let a=`${e}`.toLowerCase();try{let[t]=Intl.Collator.supportedLocalesOf(e);if(!t)throw new Error(`'${e}' is non-standard.`);a=t}catch{d.warn(`Non-standard locale provided: '${e}'. Check your 'translations' and 'loaders' in i18n config...`)}return a}):[],C=(r,e)=>Object.keys(r||{}).reduce((a,t)=>{let l=r[t],i=e?`${e}.${t}`:`${t}`;return l&&typeof l=="object"?c(c({},a),C(l,i)):h(c({},a),{[i]:l})},{}),de=async r=>{try{return(await Promise.all(r.map(e=>{var a=e,{loader:t}=a,l=V(a,["loader"]);return new Promise(async i=>{let o;try{o=await t()}catch(s){d.error(`Failed to load translation. Verify your '${l.locale}' > '${l.key}' Loader.`),d.error(s)}i(h(c({loader:t},l),{data:o}))})}))).reduce((e,{key:a,data:t,locale:l})=>{if(!t)return e;let[i]=b(l);return h(c({},e),{[i]:C(h(c({},e[i]||{}),{[a]:t}))})},{})}catch(e){d.error(e)}return{}},pe=r=>e=>{try{if(typeof e=="string")return e===r;if(typeof e=="object")return e.test(r)}catch{d.error("Invalid route config!")}return!1},fe=(r,e)=>{let a=!0;try{a=Object.keys(r).filter(t=>r[t]!==void 0).every(t=>r[t]===e[t])}catch{}return a},z=1e3*60*60*24,he=class{constructor(r){this.cachedAt=0,this.loadedKeys={},this.currentRoute=j(),this.config=j(),this.isLoading=j(!1),this.promises=new Set,this.loading={subscribe:this.isLoading.subscribe,toPromise:(e,a)=>{let t=Array.from(this.promises).filter(l=>fe({locale:b(e)[0],route:a},l)).map(({promise:l})=>l);return Promise.all(t)},get:()=>p(this.isLoading)},this.privateTranslations=j({}),this.translations={subscribe:this.privateTranslations.subscribe,get:()=>p(this.translations)},this.locales=h(c({},T([this.config,this.privateTranslations],([e,a])=>{if(!e)return[];let{loaders:t=[]}=e,l=t.map(({locale:o})=>o),i=Object.keys(a).map(o=>o);return Array.from(new Set([...b(...l),...b(...i)]))},[])),{get:()=>p(this.locales)}),this.internalLocale=j(),this.loaderTrigger=T([this.internalLocale,this.currentRoute],([e,a],t)=>{var l,i;e!==void 0&&a!==void 0&&!(e===((l=p(this.loaderTrigger))==null?void 0:l[0])&&a===((i=p(this.loaderTrigger))==null?void 0:i[1]))&&(d.debug("Triggering translation load..."),t([e,a]))},[]),this.localeHelper=j(),this.locale={subscribe:this.localeHelper.subscribe,forceSet:this.localeHelper.set,set:this.internalLocale.set,update:this.internalLocale.update,get:()=>p(this.locale)},this.initialized=T([this.locale,this.currentRoute,this.privateTranslations],([e,a,t],l)=>{p(this.initialized)||l(e!==void 0&&a!==void 0&&!!Object.keys(t).length)}),this.translation=T([this.privateTranslations,this.locale,this.isLoading],([e,a,t],l)=>{let i=e[a];i&&Object.keys(i).length&&!t&&l(i)},{}),this.t=h(c({},T([this.config,this.translation],e=>{var[a]=e,t=a,{parser:l,fallbackLocale:i}=t,o=V(t,["parser","fallbackLocale"]);return(s,...u)=>M(c({parser:l,key:s,params:u,translations:this.translations.get(),locale:this.locale.get(),fallbackLocale:i},o.hasOwnProperty("fallbackValue")?{fallbackValue:o.fallbackValue}:{}))})),{get:(e,...a)=>p(this.t)(e,...a)}),this.l=h(c({},T([this.config,this.translations],e=>{var[a,...t]=e,l=a,{parser:i,fallbackLocale:o}=l,s=V(l,["parser","fallbackLocale"]),[u]=t;return(n,g,...$)=>M(c({parser:i,key:g,params:$,translations:u,locale:n,fallbackLocale:o},s.hasOwnProperty("fallbackValue")?{fallbackValue:s.fallbackValue}:{}))})),{get:(e,a,...t)=>p(this.l)(e,a,...t)}),this.getLocale=e=>{let{fallbackLocale:a=""}=p(this.config)||{},t=e||a;if(!t)return"";let l=this.locales.get();return l.find(i=>b(t).includes(i))||l.find(i=>b(a).includes(i))||""},this.setLocale=e=>{if(!!e&&e!==p(this.internalLocale))return d.debug(`Setting '${e}' locale.`),this.internalLocale.set(e),this.loading.toPromise(e,p(this.currentRoute))},this.setRoute=e=>{if(e!==p(this.currentRoute)){d.debug(`Setting '${e}' route.`),this.currentRoute.set(e);let a=p(this.internalLocale);return this.loading.toPromise(a,e)}},this.loadConfig=async e=>{await this.configLoader(e)},this.getTranslationProps=async(e=this.locale.get(),a=p(this.currentRoute))=>{let t=p(this.config);if(!t||!e)return[];let l=this.translations.get(),{loaders:i,fallbackLocale:o="",cache:s=z}=t||{},u=Number.isNaN(+s)?z:+s;this.cachedAt?Date.now()>u+this.cachedAt&&(d.debug("Refreshing cache."),this.loadedKeys={},this.cachedAt=0):(d.debug("Setting cache timestamp."),this.cachedAt=Date.now());let[n,g]=b(e,o),$=l[n],_=l[g],w=(i||[]).map(f=>{var m=f,{locale:P}=m,v=V(m,["locale"]);return h(c({},v),{locale:b(P)[0]})}).filter(({routes:f})=>!f||(f||[]).some(pe(a))).filter(({key:f,locale:m})=>m===n&&(!$||!(this.loadedKeys[n]||[]).includes(f))||o&&m===g&&(!_||!(this.loadedKeys[g]||[]).includes(f)));if(w.length){this.isLoading.set(!0),d.debug("Fetching translations...");let f=await de(w);this.isLoading.set(!1);let m=Object.keys(f).reduce((v,y)=>h(c({},v),{[y]:Object.keys(f[y])}),{}),P=w.filter(({key:v,locale:y})=>(m[y]||[]).some(L=>`${L}`.startsWith(v))).reduce((v,{key:y,locale:L})=>h(c({},v),{[L]:[...v[L]||[],y]}),{});return[f,P]}return[]},this.addTranslations=(e,a)=>{if(!e)return;d.debug("Adding translations...");let t=Object.keys(e||{});this.privateTranslations.update(l=>t.reduce((i,o)=>h(c({},i),{[o]:c(c({},i[o]||{}),C(e[o]))}),l)),t.forEach(l=>{let i=Object.keys(e[l]).map(o=>`${o}`.split(".")[0]);a&&(i=a[l]),this.loadedKeys[l]=Array.from(new Set([...this.loadedKeys[l]||[],...i||[]]))})},this.loader=async([e,a])=>{let t=this.getLocale(e);d.debug(`Adding loader promise for '${t}' locale and '${a}' route.`);let l=(async()=>{let i=await this.getTranslationProps(t,a);i.length&&this.addTranslations(...i)})();this.promises.add({locale:t,route:a,promise:l}),l.then(()=>{t&&this.locale.get()!==t&&this.locale.forceSet(t)})},this.loadTranslations=(e,a=p(this.currentRoute)||"")=>{let t=this.getLocale(e);if(t)return this.setRoute(a),this.setLocale(t),this.loading.toPromise(t,a)},this.loaderTrigger.subscribe(this.loader),this.isLoading.subscribe(async e=>{e&&this.promises.size&&(await this.loading.toPromise(),this.promises.clear(),d.debug("Loader promises have been purged."))}),r&&this.loadConfig(r)}async configLoader(r){if(!r)return d.error("No config provided!");let e=r,{initLocale:a,fallbackLocale:t,translations:l,log:i}=e,o=V(e,["initLocale","fallbackLocale","translations","log"]);i&&ue(Q(i)),[a]=b(a),[t]=b(t),d.debug("Setting config."),this.config.set(c({initLocale:a,fallbackLocale:t,translations:l},o)),l&&this.addTranslations(l),await this.loadTranslations(a)}},U=Object.defineProperty,ge=Object.defineProperties,me=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,H=(r,e,a)=>e in r?U(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,O=(r,e)=>{for(var a in e||(e={}))X.call(e,a)&&H(r,a,e[a]);if(R)for(var a of R(e))Y.call(e,a)&&H(r,a,e[a]);return r},Z=(r,e)=>ge(r,me(e)),E=(r,e)=>{var a={};for(var t in r)X.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&R)for(var t of R(r))e.indexOf(t)<0&&Y.call(r,t)&&(a[t]=r[t]);return a},ve=(r,e)=>{for(var a in e)U(r,a,{get:e[a],enumerable:!0})},ee={};ve(ee,{ago:()=>_e,date:()=>$e,eq:()=>N,gt:()=>te,gte:()=>ke,lt:()=>ae,lte:()=>be,ne:()=>ye,number:()=>Oe});var F=(r,e)=>{let{modifierDefaults:a}=e||{},{[r]:t}=a||{};return t||{}},N=({value:r,options:e=[],defaultValue:a=""})=>(e.find(({key:t})=>`${t}`.toLowerCase()===`${r}`.toLowerCase())||{}).value||a,ye=({value:r,options:e=[],defaultValue:a=""})=>(e.find(({key:t})=>`${t}`.toLowerCase()!==`${r}`.toLowerCase())||{}).value||a,ae=({value:r,options:e=[],defaultValue:a=""})=>(e.sort((t,l)=>+t.key-+l.key).find(({key:t})=>+r<+t)||{}).value||a,te=({value:r,options:e=[],defaultValue:a=""})=>(e.sort((t,l)=>+l.key-+t.key).find(({key:t})=>+r>+t)||{}).value||a,be=({value:r,options:e=[],defaultValue:a=""})=>N({value:r,options:e,defaultValue:ae({value:r,options:e,defaultValue:a})}),ke=({value:r,options:e=[],defaultValue:a=""})=>N({value:r,options:e,defaultValue:te({value:r,options:e,defaultValue:a})}),Oe=({value:r,props:e,defaultValue:a="",locale:t="",parserOptions:l})=>{if(!t)return"";let i=F("number",l),{maximumFractionDigits:o}=i,s=E(i,["maximumFractionDigits"]),u=(e==null?void 0:e.number)||{},{maximumFractionDigits:n=o||2}=u,g=E(u,["maximumFractionDigits"]);return new Intl.NumberFormat(t,O(Z(O({},s),{maximumFractionDigits:n}),g)).format(+r||+a)},$e=({value:r,props:e,defaultValue:a="",locale:t="",parserOptions:l})=>{if(!t)return"";let i=E(F("date",l),[]),o=E((e==null?void 0:e.date)||{},[]);return new Intl.DateTimeFormat(t,O(O({},i),o)).format(+r||+a)},I=[{key:"second",multiplier:1e3},{key:"minute",multiplier:60},{key:"hour",multiplier:60},{key:"day",multiplier:24},{key:"week",multiplier:7},{key:"month",multiplier:13/3},{key:"year",multiplier:12}],re=(r="",e="")=>new RegExp(`^${r}s?$`).test(e),we=r=>I.indexOf(I.find(({key:e})=>re(e,r))),Le=(r,e)=>I.reduce(([a,t],{key:l,multiplier:i},o)=>{if(re(t,e))return[a,t];if(!t||o===we(t)+1){let s=Math.round(a/i);if(!t||Math.abs(s)>=1||e!=="auto")return[s,l]}return[a,t]},[r,""]),_e=({value:r,defaultValue:e="",locale:a="",props:t,parserOptions:l})=>{if(!a)return"";let i=F("ago",l),{format:o,numeric:s}=i,u=E(i,["format","numeric"]),n=(t==null?void 0:t.ago)||{},{format:g=o||"auto",numeric:$=s||"auto"}=n,_=E(n,["format","numeric"]),w=+r||+e,f=Le(w,g);return new Intl.RelativeTimeFormat(a,O(Z(O({},u),{numeric:$}),_)).format(...f)},Pe=r=>typeof r=="string"&&/{{(?:(?!{{|}}).)+}}/.test(r),S=r=>typeof r=="string"?r.replace(/\\(?=:|;|{|})/g,""):r,je=({value:r,props:e,payload:a,parserOptions:t,locale:l})=>`${r}`.replace(/{{\s*(?:(?!{{|}}).)+\s*}}/g,i=>{let o=S(`${i.match(/(?!{|\s).+?(?!\\[:;]).(?=\s*(?:[:;]|}}$))/)}`),s=a==null?void 0:a[o],[,u=""]=i.match(/.+?(?!\\;).;\s*default\s*:\s*([^\s:;].+?(?:\\[:;]|[^;\s}])*)(?=\s*(?:;|}}$))/i)||[];u=u||(a==null?void 0:a.default)||"";let[,n=""]=i.match(/{{\s*(?:[^;]|(?:\\;))+\s*(?:(?!\\:).[:])\s*(?!\s)((?:\\;|[^;])+?)(?=\s*(?:[;]|}}$))/i)||[];if(s===void 0&&n!=="ne")return u;let g=!!n,{customModifiers:$}=t||{},_=O(O({},ee),$||{});n=Object.keys(_).includes(n)?n:"eq";let w=_[n],f=(i.match(/[^\s:;{](?:[^;]|\\[;])+[^\s:;}]/gi)||[]).reduce((m,P,v)=>{if(v>0){let y=S(`${P.match(/(?:(?:\\:)|[^:])+/)}`.trim()),L=`${P.match(/(?:(?:\\:)|[^:])+$/)}`.trim();if(y&&y!=="default"&&L)return[...m,{key:y,value:L}]}return m},[]);return!g&&!f.length?s:w({value:s,options:f,props:e,defaultValue:u,locale:l,parserOptions:t})}),le=({value:r,props:e,payload:a,parserOptions:t,locale:l})=>{if(Pe(r)){let i=je({value:r,payload:a,props:e,parserOptions:t,locale:l});return le({value:i,payload:a,props:e,parserOptions:t,locale:l})}else return S(r)},Te=r=>({parse:(e,[a,t],l,i)=>((a==null?void 0:a.default)&&e===void 0&&(e=`${a.default}`),e===void 0&&(e=`${i}`),le({value:e,payload:a,props:t,parserOptions:r,locale:l}))}),Ve=Te,Ee=Object.defineProperty,De=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,q=(r,e,a)=>e in r?Ee(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,Ae=(r,e)=>{for(var a in e||(e={}))ie.call(e,a)&&q(r,a,e[a]);if(A)for(var a of A(e))oe.call(e,a)&&q(r,a,e[a]);return r},xe=(r,e)=>De(r,Re(e)),Ie=(r,e)=>{var a={};for(var t in r)ie.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&A)for(var t of A(r))e.indexOf(t)<0&&oe.call(r,t)&&(a[t]=r[t]);return a},B=r=>{var e=r,{parserOptions:a={}}=e,t=Ie(e,["parserOptions"]);return xe(Ae({},t),{parser:Ve(a)})},Se=class extends he{constructor(r){super(r&&B(r)),this.loadConfig=e=>super.configLoader(B(e))}},Ce=Se;const Fe="English",Ne="Deutsch";var W={en:Fe,de:Ne};const Ke={translations:{en:{lang:W},de:{lang:W}},loaders:[{locale:"en",key:"main",loader:async()=>(await k(()=>import("./main-066a0c1a.js"),[])).default},{locale:"en",key:"apps",loader:async()=>(await k(()=>import("./apps-349637af.js"),[])).default},{locale:"en",key:"openSource",loader:async()=>(await k(()=>import("./openSource-26d22a06.js"),[])).default},{locale:"en",key:"home",loader:async()=>(await k(()=>import("./index-e6f3ee9a.js"),[])).default},{locale:"de",key:"main",loader:async()=>(await k(()=>import("./main-db1c403f.js"),[])).default},{locale:"de",key:"apps",loader:async()=>(await k(()=>import("./apps-56300e2c.js"),[])).default},{locale:"de",key:"openSource",loader:async()=>(await k(()=>import("./openSource-76d87b4f.js"),[])).default},{locale:"de",key:"home",loader:async()=>(await k(()=>import("./index-d7e24a15.js"),[])).default}]},{t:He,locale:qe,locales:Be,loading:We,loadTranslations:Ge}=new Ce(Ke);export{Ge as a,qe as l,He as t};
